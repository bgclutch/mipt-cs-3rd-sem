#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <unistd.h>
#include <sys/types.h> /* Добавлено для корректности типов */

/* Дочерний процесс, анализирующий год и возвращающий различные сигналы,
 * в зависимости от его високосности.
 */
int main (int argc, char ** argv)
{
	int year;

    /* Проверка наличия аргумента (года) */
	if (argc < 2)
	{
		fprintf (stderr, "child: too few arguments\n");
		return 2;
	}

	year = atoi (argv[1]);

	if (year <= 0)
		return 2;

    /* Объяснение условия високосного года:
       Год является високосным в двух случаях:
       1. ((year % 4 == 0) && (year % 100 != 0))
          - Год делится на 4 без остатка, НО ПРИ ЭТОМ не делится на 100.
          (Например: 1996, 2004, 2024 - високосные. 1900 - не високосный, т.к. делится на 100).

       ИЛИ (||)

       2. (year % 400 == 0)
          - Год делится на 400 без остатка.
          (Это исключение для вековых годов: 2000 - високосный, 1600 - високосный).
    */
	if ( ((year%4 == 0) && (year%100 != 0)) || (year%400 == 0) )
    {
        /* Год високосный -> посылаем сигнал SIGUSR1 родителю.
           getppid() - Get Parent Process ID (получить ID родителя).
           Аргументы этой функции не нужны, скобки должны быть пустыми. */
		kill (getppid(), SIGUSR1);
    }
	else
    {
        /* Год НЕ високосный -> посылаем сигнал SIGUSR2 */
		kill (getppid(), SIGUSR2);
    }

	return 0;
}